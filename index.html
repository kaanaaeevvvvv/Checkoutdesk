<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AdGuard | Checkout</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',-apple-system,BlinkMacSystemFont,sans-serif;background:#f8f9fa;color:#2c3e50;line-height:1.6}

    .header{background:#fff;padding:1rem 0;border-bottom:1px solid #e9ecef;box-shadow:0 2px 4px rgba(0,0,0,.04)}
    .header-content{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:0 2rem}
    .logo{display:flex;align-items:center;gap:.75rem}

    .auth-link{color:#007bff;text-decoration:none;font-size:.9rem}
    .auth-link:hover{text-decoration:underline}

    .main-container{max-width:1200px;margin:0 auto;padding:2rem;display:grid;grid-template-columns:1fr 350px;gap:3rem;align-items:start}
    .checkout-form{display:flex;flex-direction:column;gap:2rem}

    .legal-note{font-size:.9rem;color:#495057}
    .legal-note a{color:#2e7d32;text-underline-offset:2px}

    .form-section{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 8px rgba(0,0,0,.06);border:1px solid #e9ecef}
    .section-header{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem}
    .section-number{background:#68BC71;color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700}
    .section-title{font-size:1.1rem;font-weight:600;color:#2c3e50}

    .form-group{margin-bottom:1rem}
    .form-label{display:block;margin-bottom:.5rem;font-weight:500;color:#495057;font-size:.9rem}
    .form-input{width:100%;padding:.75rem;border:2px solid #e9ecef;border-radius:4px;background:#fff;color:#495057;font-size:.9rem;transition:border-color .2s ease}
    .form-input:focus{outline:none;border-color:#68BC71}
    .form-input::placeholder{color:#adb5bd}

    .coupon-section .form-input{border-radius:4px 0 0 4px}
    .coupon-button{padding:.75rem 1.5rem;background:#68BC71;color:#fff;border:none;border-radius:0 4px 4px 0;cursor:pointer;font-weight:500;transition:background-color .2s ease}
    .coupon-button:hover{background:#5aa863}
    .coupon-input-group{display:flex}

    .additional-services{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .service-card{border:2px solid #e9ecef;border-radius:8px;padding:1.5rem;background:#f8f9fa;cursor:pointer;transition:all .2s ease;position:relative}
    .service-card:hover{border-color:#68BC71;transform:translateY(-2px);box-shadow:0 4px 12px rgba(104,188,113,.15)}
    .service-card.selected{border-color:#68BC71;background:rgba(104,188,113,.05)}
    .service-icon{margin-bottom:.5rem}
    .service-name{font-weight:600;font-size:.95rem;color:#2c3e50;margin-bottom:.5rem}
    .service-description{font-size:.8rem;color:#6c757d;margin-bottom:1rem;line-height:1.4}
    .service-price{font-weight:600;color:#68BC71;font-size:.9rem}
    .add-button{position:absolute;top:1rem;right:1rem;background:#fff;border:2px solid #e9ecef;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#68BC71;cursor:pointer;transition:all .2s ease}
    .service-card.selected .add-button{background:#68BC71;border-color:#68BC71;color:#fff}

    .payment-methods{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:1.5rem}
    .payment-method{border:2px solid #e9ecef;border-radius:8px;padding:1rem;text-align:center;cursor:pointer;background:#fff;transition:all .2s ease;position:relative}
    .payment-method:hover,.payment-method.active{border-color:#68BC71}
    .payment-method.active::after{content:'‚úì';position:absolute;top:.5rem;right:.5rem;background:#68BC71;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem}
    .payment-icon{font-size:1.5rem;margin-bottom:.5rem;display:block}
    .payment-name{font-size:.85rem;color:#2c3e50;font-weight:600}
    .payment-sub{font-size:.75rem;color:#6c757d}

    .card-form{display:grid;gap:1rem;margin-top:1.5rem}
    .card-row{display:grid;grid-template-columns:2fr 1fr;gap:1rem}

    .checkout-button{
      width:100%;
      background:#68BC71;
      color:#fff;
      border:none;
      border-radius:8px;
      padding:1rem 2rem;
      font-size:1.1rem;
      font-weight:600;
      cursor:pointer;
      transition:all .3s ease;
      box-shadow:0 4px 12px rgba(104,188,113,.25);
      margin-top:1rem;
    }
    .checkout-button:hover{
      background:#5aa863;
      transform:translateY(-2px);
      box-shadow:0 6px 16px rgba(104,188,113,.35);
    }
    .checkout-button:active{
      transform:translateY(0);
      box-shadow:0 2px 8px rgba(104,188,113,.25);
    }

    .order-summary{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 8px rgba(0,0,0,.06);border:1px solid #e9ecef;height:fit-content;position:sticky;top:2rem}
    .summary-title{font-size:1.1rem;font-weight:600;color:#2c3e50;margin-bottom:1.5rem}
    .plan-info{background:rgba(104,188,113,.1);border:1px solid rgba(104,188,113,.2);border-radius:8px;padding:1rem;margin-bottom:1.5rem;position:relative}
    .plan-badge{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}
    .plan-icon{background:#68BC71;color:#fff;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-size:.8rem}
    .plan-name{font-weight:600;color:#2c3e50}
    .plan-details{font-size:.9rem;color:#6c757d;margin-bottom:1rem}
    .plan-pricing{display:flex;justify-content:space-between;align-items:center}
    .original-price{text-decoration:line-through;color:#6c757d;font-size:.8rem}
    .current-price{font-weight:600;color:#2c3e50}
    .savings-badge{background:#dc3545;color:#fff;padding:.25rem .5rem;border-radius:12px;font-size:.7rem;font-weight:700}

    .price-breakdown{border-top:1px solid #e9ecef;padding-top:1rem;margin-top:1rem}
    .price-row{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem;color:#495057}
    .price-row.total{font-weight:700;font-size:1.1rem;color:#2c3e50;border-top:1px solid #e9ecef;padding-top:.5rem;margin-top:1rem}

    .guarantee-info{background:rgba(104,188,113,.05);border:1px solid rgba(104,188,113,.2);border-radius:6px;padding:.75rem;margin-top:1rem;text-align:center}
    .guarantee-badge{background:#68BC71;color:#fff;border-radius:50%;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;font-size:1rem;margin-bottom:.5rem}
    .guarantee-text{font-size:.8rem;color:#495057;font-weight:600}
    .optional-label{color:#6c757d;font-size:.8rem;font-weight:400}

    .footer-legal{max-width:1200px;margin:0 auto;padding:0 2rem 2rem;color:#6c757d;font-size:.85rem}
    .footer-legal a{color:#2e7d32}

    @media (max-width:768px){
      .main-container{grid-template-columns:1fr;gap:2rem;padding:1rem}
      .additional-services{grid-template-columns:1fr}
      .payment-methods{grid-template-columns:1fr}
      .card-row{grid-template-columns:1fr}
      .footer-legal{padding:0 1rem 1rem}
    }

    /* –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –æ–±—ë—Ä—Ç–∫–∏ */
    img{max-width:100%;height:auto;display:block}
    .ag-imglink{display:inline-block;line-height:0}
    .logo .ag-imglink img{height:28px;width:auto}
    .service-icon .ag-imglink img{width:48px;height:48px;object-fit:contain;border-radius:8px}
  </style>
</head>
<body>
<header class="header">
  <div class="header-content">
    <div class="logo">
      <a class="ag-imglink" href="https://adguard.com" target="_blank" rel="noopener">
        <!-- –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø AdGuard -->
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/90/AdGuard.svg" alt="AdGuard">
      </a>
      <!-- —É–¥–∞–ª–µ–Ω–æ –ª–∏—à–Ω–µ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ "AdGuard" —Ä—è–¥–æ–º —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
    </div>
    <div>
      <span>–£–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã? </span>
      <a href="#" class="auth-link">–í–æ–π–¥–∏—Ç–µ –≤ AdGuard Account</a>
    </div>
  </div>
</header>

<div class="main-container">
  <div class="checkout-form">
    <!-- –ò–Ω—Ñ–æ –∫–∞–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ: –æ—Ñ–µ—Ä—Ç–∞/–ø–æ–ª–∏—Ç–∏–∫–∞ -->
   

    <!-- 1. Email -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-number">1</div>
        <h2 class="section-title">–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –¥–ª—è AdGuard Account</h2>
      </div>
      <div class="form-group">
        <label class="form-label">–í–∞—à –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã</label>
        <input type="email" class="form-input" placeholder="name@example.com" required>
      </div>
      <p style="font-size:.8rem;color:#6c757d;margin-top:.5rem">
        –í—ã —Å–º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –æ–± —É—Å–ª—É–≥–∞—Ö AdGuard –≤ AdGuard Account.
      </p>
    </div>

    <!-- 2. –ü—Ä–æ–º–æ–∫–æ–¥ -->
    <div class="form-section coupon-section">
      <div class="section-header">
        <div class="section-number">2</div>
        <h2 class="section-title">–ü—Ä–æ–º–æ–∫–æ–¥ <span class="optional-label">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></h2>
      </div>
      <div class="coupon-input-group">
        <input type="text" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" id="couponInput">
        <button class="coupon-button" onclick="applyCoupon()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
    </div>

    <!-- 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-number">3</div>
        <h2 class="section-title">–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏ <span class="optional-label">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></h2>
      </div>

      <div class="additional-services">
        <!-- AdGuard Ad Blocker (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è) -->
        <div class="service-card" onclick="toggleService('adblocker')" id="service-adblocker">
          <div class="add-button">+</div>
          <div class="service-icon">
            <a class="ag-imglink" href="https://adguard.com/ru/adguard-browser-extension/overview.html" target="_blank" rel="noopener">
              <img src="https://play-lh.googleusercontent.com/pCqOLS2w-QaTI63tjFLvncHnbXc4100EQI3FAD0RZEFWjGMa_54M4x2HD7j48qMSv3kk" alt="AdGuard Ad Blocker">
            </a>
          </div>
          <div class="service-name">AdGuard Ad Blocker ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è</div>
          <div class="service-description">–î–æ 3 —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã –∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤.</div>
          <div class="service-price">–∑–∞ 79 ‚ÇΩ/–º–µ—Å.</div>
        </div>

        <!-- AdGuard DNS -->
        <div class="service-card" onclick="toggleService('dns')" id="service-dns">
          <div class="add-button">+</div>
          <div class="service-icon">
            <a class="ag-imglink" href="https://adguard-dns.io" target="_blank" rel="noopener">
              <img src="https://adguard-dns.io/apple-touch-icon.png" alt="AdGuard DNS">
            </a>
          </div>
          <div class="service-name">AdGuard DNS</div>
          <div class="service-description">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π DNS —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ä–µ–∫–ª–∞–º—ã –∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –ü–û –¥–ª—è –≤—Å–µ–π —Å–µ—Ç–∏.</div>
          <div class="service-price">–∑–∞ 133 ‚ÇΩ/–º–µ—Å.</div>
        </div>

        <!-- AdGuard Mail -->
        <div class="service-card" onclick="toggleService('mail')" id="service-mail">
          <div class="add-button">+</div>
          <div class="service-icon">
            <a class="ag-imglink" href="https://adguard-mail.com" target="_blank" rel="noopener">
              <img src="https://adguard-mail.com/apple-touch-icon.png" alt="AdGuard Mail">
            </a>
          </div>
          <div class="service-name">AdGuard Mail</div>
          <div class="service-description">–ê–ª–∏–∞—Å—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞, —á—Ç–æ–±—ã —Å–∫—Ä—ã–≤–∞—Ç—å –ª–∏—á–Ω—É—é –ø–æ—á—Ç—É –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–ø–∞–º.</div>
          <div class="service-price">–∑–∞ 219 ‚ÇΩ/–º–µ—Å.</div>
        </div>
      </div>
    </div>

    <!-- 4. –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-number">4</div>
        <h2 class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>
      </div>

      <div class="payment-methods">
        <div class="payment-method active" onclick="selectPayment('card')">
          <div class="payment-icon">üí≥</div>
          <div class="payment-name">–ö–∞—Ä—Ç–∞</div>
          <div class="payment-sub">Visa, Mastercard, Mir, T-Pay</div>
        </div>
        <div class="payment-method" onclick="selectPayment('sbp')">
          <div class="payment-icon">üè¶</div>
          <div class="payment-name">–°–ë–ü</div>
          <div class="payment-sub">–ë—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏</div>
        </div>
        <div class="payment-method" onclick="selectPayment('crypto')">
          <div class="payment-icon">ü™ô</div>
          <div class="payment-name">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</div>
          <div class="payment-sub">BTC, ETH, LTC, USDT‚Ä¶</div>
        </div>
      </div>

      <div class="card-form" id="cardForm">
        <div class="form-group">
          <input type="text" class="form-input" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã" maxlength="19">
        </div>
        <div class="card-row">
          <div class="form-group">
            <input type="text" class="form-input" placeholder="–ú–ú/–ì–ì" maxlength="5">
          </div>
          <div class="form-group">
            <input type="text" class="form-input" placeholder="CVC" maxlength="3">
          </div>
        </div>
        <div class="form-group">
          <input type="text" class="form-input" placeholder="–ò–º—è –Ω–∞ –∫–∞—Ä—Ç–µ">
        </div>
      </div>

      <div style="margin-top:1.5rem;padding:1rem;background:#f8f9fa;border-radius:6px;font-size:.8rem;color:#495057">
        <strong>–ü—Ä—è–º–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤</strong><br>
        –ü–æ–¥–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—ã –µ—ë –Ω–µ –æ—Ç–º–µ–Ω–∏—Ç–µ. –ú—ã —Å–æ–æ–±—â–∏–º –æ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–∏–µ–º. –û—Ç–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –º–æ–∂–Ω–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <button class="checkout-button" onclick="processOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>

  <!-- –°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞ -->
  <div class="order-summary">
    <h3 class="summary-title">–°–≤–µ–¥–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–µ</h3>

    <div class="plan-info">
      <div class="plan-badge">
        <div class="plan-icon">üõ°Ô∏è</div>
        <div class="plan-name">–ì–æ–¥–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</div>
      </div>
      <div class="plan-details">AdGuard PROXY (1 –≥–æ–¥)</div>
      <div class="plan-pricing">
        <div>
          <div class="current-price" id="currentPrice">3 948 ‚ÇΩ</div>
          <div class="original-price" id="originalPrice">11 864 ‚ÇΩ</div>
        </div>
        <div class="savings-badge" id="savingsBadge">–°—ç–∫–æ–Ω–æ–º–∏–ª–∏ 67%</div>
      </div>
    </div>

    <div class="price-breakdown">
      <div class="price-row">
        <span>AdGuard PROXY (1 –≥–æ–¥):</span>
        <span id="productPriceRow">11 864 ‚ÇΩ</span>
      </div>
      <div class="price-row" id="savedRow">
        <span>–í–∞—à–∞ —Å–∫–∏–¥–∫–∞</span>
        <span style="color:#dc3545" id="savedAmount">‚àí7 916 ‚ÇΩ</span>
      </div>
      <div id="additionalServices"></div>
      <div class="price-row total">
        <span>–í—Å–µ–≥–æ</span>
        <span id="totalAmount">3 948 ‚ÇΩ</span>
      </div>
    </div>

    <div class="guarantee-info">
      <div class="guarantee-badge">30</div>
      <div class="guarantee-text">–î–ù–ï–ô <br>–ì–ê–†–ê–ù–¢–ò–Ø –í–û–ó–í–†–ê–¢–ê –°–†–ï–î–°–¢–í</div>
    </div>
  </div>
</div>

<!-- —Ñ—É—Ç–µ—Ä —Å –ø–æ–≤—Ç–æ—Ä–∞–º–∏ —Å—Å—ã–ª–æ–∫ –∫–∞–∫ ¬´–≤–Ω–∏–∑—É¬ª -->
<div class="footer-legal">
  –ü—Ä–æ–¥–æ–ª–∂–∞—è, –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ
  <a href="https://adguard.com/ru/offer.html" target="_blank" rel="noopener">–ü—É–±–ª–∏—á–Ω—É—é –æ—Ñ–µ—Ä—Ç—É</a>
  –∏
  <a href="https://adguard.com/ru/privacy.html" target="_blank" rel="noopener">–ü–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
</div>

<script>
  // –ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ (–∫–∞–∫ –≤ –º–∞–∫–µ—Ç–µ)
  let basePrice = 3948;           // ‚ÇΩ
  const originalPrice = 11864;    // ‚ÇΩ
  const saved = originalPrice - basePrice;

  // –ì–æ–¥–æ–≤—ã–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ–ø.—É—Å–ª—É–≥
  // Ad Blocker –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è: 79 ‚ÇΩ/–º–µ—Å ‚Üí 948 ‚ÇΩ/–≥–æ–¥
  // DNS: ~133 ‚ÇΩ/–º–µ—Å ‚Üí 1 596 ‚ÇΩ/–≥–æ–¥
  // Mail: 219 ‚ÇΩ/–º–µ—Å ‚Üí 2 628 ‚ÇΩ/–≥–æ–¥
  const servicesPrices = {
    adblocker: 948,
    dns: 1596,
    mail: 2628
  };

  const servicesNames = {
    adblocker: 'AdGuard Ad Blocker ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è (1 –≥–æ–¥)',
    dns: 'AdGuard DNS (1 –≥–æ–¥)',
    mail: 'AdGuard Mail (1 –≥–æ–¥)'
  };

  let selectedServices = new Set();

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∫–∞—Ä—Ç—ã
  document.querySelector('input[placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã"]').addEventListener('input', function(e){
    let x = e.target.value.replace(/\s+/g,'').replace(/[^0-9]/g,'');
    let matches = x.match(/\d{4,16}/g);
    let match = (matches && matches[0]) || '';
    let parts = [];
    for (let i=0;i<match.length;i+=4) parts.push(match.substring(i,i+4));
    e.target.value = parts.length ? parts.join(' ') : match;
  });

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  document.querySelector('input[placeholder="–ú–ú/–ì–ì"]').addEventListener('input', function(e){
    let x = e.target.value.replace(/\D/g,'');
    x = x.replace(/(\d{2})(\d)/,'$1/$2');
    e.target.value = x;
  });

  function selectPayment(method){
    document.querySelectorAll('.payment-method').forEach(el=>el.classList.remove('active'));
    event.target.closest('.payment-method').classList.add('active');
    document.getElementById('cardForm').style.display = method==='card' ? 'block' : 'none';
  }

  function toggleService(serviceId){
    const card = document.getElementById(`service-${serviceId}`);
    const button = card.querySelector('.add-button');
    if (selectedServices.has(serviceId)){
      selectedServices.delete(serviceId);
      card.classList.remove('selected');
      button.textContent = '+';
    } else {
      selectedServices.add(serviceId);
      card.classList.add('selected');
      button.textContent = '‚úì';
    }
    updatePricing();
  }

  function rub(n){ return n.toLocaleString('ru-RU') + ' ‚ÇΩ'; }

  function updatePricing(){
    let addons = 0;
    let html = '';
    selectedServices.forEach(id=>{
      const price = servicesPrices[id] || 0;
      addons += price;
      html += `
        <div class="price-row">
          <span>${servicesNames[id]}:</span>
          <span>${rub(price)}</span>
        </div>`;
    });

    const total = basePrice + addons;
    document.getElementById('additionalServices').innerHTML = html;
    document.getElementById('totalAmount').textContent = rub(total);
    document.getElementById('currentPrice').textContent = rub(basePrice);
    document.getElementById('originalPrice').textContent = rub(originalPrice);
    document.getElementById('productPriceRow').textContent = rub(originalPrice);
    document.getElementById('savedAmount').textContent = '‚àí' + rub(saved);
  }

  function applyCoupon(){
    const c = document.getElementById('couponInput').value.trim();
    if (c) alert(`–ü—Ä–æ–º–æ–∫–æ–¥ ¬´${c}¬ª –ø—Ä–∏–º–µ–Ω—ë–Ω!`);
  }

  function processOrder(){
    alert('–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è...');
  }

  // Init
  updatePricing();
</script>
</body>
</html>